# 开发环境配置文件
# 用于本地开发和测试

# ================================
# 项目基础配置
# ================================
PROJECT_NAME=wlweb
ENVIRONMENT=development
DEBUG=true
LOG_LEVEL=DEBUG

# ================================
# 前端配置
# ================================
# API基础URL（开发环境）
VITE_API_BASE_URL=http://localhost:8000/api

# 应用标题
VITE_APP_TITLE=游戏中间件管理系统 (开发环境)

# 开发服务器配置
FRONTEND_PORT=80
VITE_DEV_SERVER_HOST=0.0.0.0
VITE_DEV_SERVER_PORT=3000

# 热重载配置
CHOKIDAR_USEPOLLING=true
VITE_HMR_PORT=24678

# ================================
# 数据库配置 (MySQL)
# ================================
MYSQL_HOST=localhost
MYSQL_PORT=3306
MYSQL_ROOT_PASSWORD=root123
MYSQL_DATABASE=wlweb
MYSQL_USER=wlweb
MYSQL_PASSWORD=wlweb123

# 数据库连接URL
DATABASE_URL=mysql+pymysql://wlweb:wlweb123@localhost:3306/wlweb

# 数据库连接池配置
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ================================
# Redis配置
# ================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis123456
REDIS_DB=0
REDIS_URL=redis://:redis123456@localhost:6379/0

# Redis连接池配置
REDIS_MAX_CONNECTIONS=20
REDIS_RETRY_ON_TIMEOUT=true
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# ================================
# 后端服务配置
# ================================
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_WORKERS=1
BACKEND_RELOAD=true

# ================================
# 安全配置 (开发环境)
# ================================
# 注意：这些是开发环境的密钥，不要在生产环境使用！
SECRET_KEY=dev-secret-key-change-in-production-12345678901234567890
JWT_SECRET_KEY=dev-jwt-secret-key-change-in-production-12345678901234567890
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30
REFRESH_TOKEN_EXPIRE_DAYS=7

# 密码加密
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=12

# ================================
# CORS配置 (开发环境)
# ================================
# 开发环境允许所有源
CORS_ORIGINS=http://localhost:3000,http://127.0.0.1:3000,http://localhost:8080,http://127.0.0.1:8080
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,OPTIONS,PATCH
CORS_ALLOW_HEADERS=*

# ================================
# 文件上传配置
# ================================
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,txt,zip

# 静态文件服务
STATIC_DIR=./static
STATIC_URL=/static

# ================================
# 日志配置
# ================================
LOG_DIR=./logs
LOG_FILE=app.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# 访问日志
ACCESS_LOG=true
ACCESS_LOG_FILE=access.log

# ================================
# 邮件配置 (开发环境使用MailHog)
# ================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_TLS=false
SMTP_SSL=false

# 邮件发送者信息
MAIL_FROM=noreply@localhost
MAIL_FROM_NAME=游戏中间件系统

# ================================
# 缓存配置
# ================================
CACHE_TYPE=redis
CACHE_DEFAULT_TIMEOUT=300  # 5分钟
CACHE_KEY_PREFIX=wlweb:dev:

# ================================
# 会话配置
# ================================
SESSION_TYPE=redis
SESSION_TIMEOUT=3600  # 1小时
SESSION_KEY_PREFIX=session:dev:

# ================================
# API配置
# ================================
API_V1_PREFIX=/api/v1
API_DOCS_URL=/docs
API_REDOC_URL=/redoc
API_OPENAPI_URL=/openapi.json

# API限流配置（开发环境较宽松）
RATE_LIMIT_ENABLED=true
RATE_LIMIT_DEFAULT=1000/minute
RATE_LIMIT_LOGIN=10/minute
RATE_LIMIT_REGISTER=5/minute

# ================================
# 开发工具配置
# ================================
# Adminer数据库管理
ADMINER_PORT=8080

# Redis Commander
REDIS_COMMANDER_PORT=8081
REDIS_COMMANDER_PASSWORD=admin123

# MailHog邮件测试
MAILHOG_SMTP_PORT=1025
MAILHOG_WEB_PORT=8025

# ================================
# 性能配置
# ================================
# 数据库查询超时
DB_QUERY_TIMEOUT=30

# HTTP请求超时
HTTP_TIMEOUT=30

# 异步任务配置
CELERY_BROKER_URL=redis://:redis123456@localhost:6379/1
CELERY_RESULT_BACKEND=redis://:redis123456@localhost:6379/2

# ================================
# 监控和调试
# ================================
# 启用SQL查询日志
SQL_ECHO=true

# 启用性能分析
PROFILING_ENABLED=true

# 启用调试工具栏
DEBUG_TOOLBAR=true

# 健康检查端点
HEALTH_CHECK_ENDPOINT=/health

# ================================
# 测试配置
# ================================
TEST_DATABASE_URL=mysql+pymysql://app_user:app123456@localhost:3306/game_middleware_test
TEST_REDIS_URL=redis://:redis123456@localhost:6379/15

# 测试数据目录
TEST_DATA_DIR=./tests/data
TEST_UPLOAD_DIR=./tests/uploads

# ================================
# 开发环境特殊配置
# ================================
# 自动重载
AUTO_RELOAD=true

# 代码热重载
HOT_RELOAD=true

# 开发模式下的特殊功能
DEV_MODE_FEATURES=true

# 跳过某些验证（仅开发环境）
SKIP_AUTH_FOR_TESTING=false
SKIP_EMAIL_VERIFICATION=true

# ================================
# 注意事项
# ================================
# 1. 这是开发环境配置，不要在生产环境使用
# 2. 所有密钥和密码都是示例值，请根据需要修改
# 3. 开发环境的安全配置较为宽松，生产环境需要加强
# 4. 如需修改配置，请复制此文件并重命名为 .env.local